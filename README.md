## My Audit reports

This repository contains all the audit reports and their outcomes.

### First Flight #1 - First Flight #1: PasswordStore [Link](https://github.com/iftikharuddin/audit-reports/blob/master/codehawk-first-flights/Iftikhar-First-Flight-%231_-PasswordStore.md) 


| **Finding**                                | **Summary**                                                                                                                    | **Impact**                                                                                                                     | **Recommendations**                                                                                                      |
|--------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| **High Risk Findings**                     |                                                                                                                                  |                                                                                                                                |                                                                                                                          |
| H-01. Password Handling in Deployment Script | Plain passwords are passed directly in the DeployPasswordStore.s.sol script, which is insecure.                               | Exposes sensitive information and poses a security risk.                                                                      | A more secure approach is to read passwords from an environment file (e.g., .env). Replace direct password usage. |
| H-02. Storage of Plain-Text Passwords      | The PasswordStore contract's `setPassword` function stores plain-text passwords, a severe security risk.                        | Significant security risk due to potential unauthorized access and data breaches.                                             | Implement secure hashing and salting to protect user data.  |
| H-03. Access Control Lacking in setPassword Function | The `setPassword` function lacks proper access control modifiers or owner checks, making it vulnerable to unauthorized access. | Significant risk of unauthorized access and potential data breaches. Implement access control or `onlyOwner` modifiers.     |
| **Low Risk Findings**                      |                                                                                                                                  |                                                                                                                                |                                                                                                                          |
| L-01. Revert Usage in getPassword Function   | The `getPassword` function in the PasswordStore contract is not gas efficient due to the use of `revert`.                     | Inefficient gas usage, affecting code efficiency and readability.                                                            | Replace `revert` with a gas-efficient `onlyOwner` modifier.  |


### First Flight #2 - First Flight #2: Puppy Raffle [Link](https://github.com/iftikharuddin/audit-reports/blob/master/codehawk-first-flights/Iftikhar-First-Flight-%232_-Puppy-Raffle.md)


| **Finding**                                | **Summary**                                                                                                                    | **Impact**                                                                                                                      | **Recommendations**                                                                                                          |
|--------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------|
| **High Risk Findings**                     |                                                                                                                                  |                                                                                                                                 |                                                                                                                              |
| H-01. use transfer instead of sendValue    | Using sendValue for Ether transfers can expose the contract to reentrancy attacks.                                          | Potential reentrancy attacks, fund losses, and security risks.                                                                  | Use the transfer method for secure Ether transfers.                                                                          |
| H-02. current randomness is predictable    | The contract relies on on-chain data for randomness, which can be manipulated.                                                 | Predictable randomness can lead to unfairness and manipulation.                                                                | Implement a more secure source of randomness like Chainlink VRF.                                                           |
| H-03. withdrawFees has no access control    | The withdrawFees function lacks access control, allowing unauthorized users to withdraw fees.                               | Unauthorized withdrawal of fees, fund loss, and financial disruption.                                                         | Add an access control modifier, like onlyOwner, to the function.                                                            |
| **Medium Risk Findings**                  |                                                                                                                                  |                                                                                                                                 |                                                                                                                              |
| M-01. Gas-Intensive Duplicate Check         | The enterRaffle function's duplicate check can lead to denial-of-service attacks.                                             | Inefficient gas usage, unequal gas costs, and potential DoS attacks.                                                          | Consider using a different data structure to track participants.                                                             |
| **Low Risk Findings**                      |                                                                                                                                  |                                                                                                                                |                                                                                                                              |
| L-01. Zero Return                          | Change the return value of the getActivePlayerIndex function for clarity and to avoid confusion.                             | Potential confusion due to a valid array index (0) misleading users.                                                          | Change the return value to a different constant, like -1, when the player is not found.                                    |
| L-02. use ERC721A instead of ERC721        | Consider using the ERC721A standard for gas efficiency and security optimization.                                            | High gas costs, security vulnerabilities with ERC721.                                                                         | Use ERC721A for better gas efficiency and security.                                                                        |


### First Flight #3: Thunder Loan [ in Judging phase ] [Link](https://github.com/iftikharuddin/audit-reports/blob/master/codehawk-first-flights/Iftikhar-First-Flight-#3_-Thunder-Loan.md)

| **Finding**  | **Summary**  | **Impact**  | **Recommendations**  | **Relevant Links**  |
|--------------|--------------|-------------|-----------------------|----------------------|
| **H-01**     | Potential reentrancy in flashloan, can drain tokens from the contract | Unauthorized reentrancy attacks, enabling malicious external contracts to disrupt the flash loan process and potentially drain assets from the ThunderLoan contract. | 1 - Calculate the fee and update the exchange rate before interacting with external contracts. 2 - Implement guard conditions to prevent reentrancy attacks by checking whether the function has already been called during the execution of a flash loan. | [Link 1](https://github.com/Cyfrin/2023-11-Thunder-Loan/blob/8539c83865eb0d6149e4d70f37a35d9e72ac7404/src/protocol/ThunderLoan.sol#L180), [Link 2](https://github.com/Cyfrin/2023-11-Thunder-Loan/blob/8539c83865eb0d6149e4d70f37a35d9e72ac7404/src/protocol/ThunderLoan.sol#L194) |
| **H-02**     | `receiverAddress.isContract` is not foolproof, allowing an EOA to misuse the flash loan feature | External addresses (EOAs) can initiate flash loans, potentially leading to misuse of the flash loan functionality and destabilization of the system. | Improve the check for `receiverAddress.isContract()` to be more robust and prevent EOA bypasses. | [Link](https://github.com/Cyfrin/2023-11-Thunder-Loan/blob/8539c83865eb0d6149e4d70f37a35d9e72ac7404/src/protocol/ThunderLoan.sol#L188) |
| **H-03**     | `ThunderLoanUpgraded` will have no access to `updateExchangeRate`, will not be able to perform flashloans | The inability of the `ThunderLoanUpgraded` contract to access the `updateExchangeRate` function may lead to the loss of key functionality, impacting the ability to enable users to perform flash loans. | 1 - Modify the `onlyThunderLoan` modifier to include `ThunderLoanUpgraded` for access to the `updateExchangeRate` function. 2 - Implement a proxy pattern for consistent functionality across both contracts. 3 - Ensure backward compatibility and rigorously test the modified contracts for security. 4 - Provide clear upgrade documentation for users. | [Link](https://github.com/Cyfrin/2023-11-Thunder-Loan/blob/8539c83865eb0d6149e4d70f37a35d9e72ac7404/src/protocol/AssetToken.sol#L80C57-L80C57) |
| **H-04**     | Extraneous Code in Deposit Function Impacts Exchange Rate | The unconventional inclusion of exchange rate update lines within the deposit function introduces complexity, jeopardizes exchange rate stability, and departs from standard practices. | Remove the exchange rate update from the deposit function to align it with standard practices. The deposit function should focus on the core deposit operation without altering exchange rates. | [Link 1](https://github.com/Cyfrin/2023-11-Thunder-Loan/blob/8539c83865eb0d6149e4d70f37a35d9e72ac7404/src/protocol/ThunderLoan.sol#L153C10-L153C10), [Link 2](https://github.com/Cyfrin/2023-11-Thunder-Loan/blob/8539c83865eb0d6149e4d70f37a35d9e72ac7404/src/protocol/ThunderLoan.sol#L154) |
| **H-05**     | `updateExchangeRate` function can be exploited/manipulated by attackers | The use of local functions `ThunderLoan::deposit->updateExchangeRate` & `ThunderLoan::flashloan->updateExchangeRate` may allow attackers to manipulate exchange rates, recommending reliance on decentralized price feeds, such as Chainlink, for enhanced security. | Utilize decentralized price feeds, such as Chainlink, for more reliable and secure price information. | [Link 1](https://github.com/Cyfrin/2023-11-Thunder-Loan/blob/8539c83865eb0d6149e4d70f37a35d9e72ac7404/src/protocol/ThunderLoan.sol#L154), [Link 2](https://github.com/Cyfrin/2023-11-Thunder-Loan/blob/8539c83865eb0d6149e4d70f37a35d9e72ac7404/src/protocol/ThunderLoan.sol#L194) |


### First Flight #4: Boss Bridge [ In Progress ]
